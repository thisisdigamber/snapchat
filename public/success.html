<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Account Verified</title>

  <!-- REQUIRED for mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Styles -->
  <link rel="stylesheet" href="/style.css">
</head>

<body>

  <!-- Verification Popup -->
  <div id="verifyOverlay" class="overlay hidden">
    <div class="verify-modal">
      <h2>Account Verified</h2>
      <p id="verifyMessage"></p>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">

    <div class="verify-badge">âœ”</div>

    <h1 class="success-title">Account Verified</h1>
    <p class="success-sub">Authentication successful</p>

    <div class="verified-user-box">
      <span class="label">Verified account</span>
      <span id="userDisplay" class="user-name"></span>
    </div>

    <button onclick="window.location.href='/'">Home</button>

    <button
      onclick="window.location.href='/login.html'"
      style="margin-top:10px;background:white;color:black;border:1px solid #ddd;">
      Logout
    </button>

  </div>

  <!-- LOGIC: fetch user ONCE, then show popup -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const overlay = document.getElementById("verifyOverlay");
      const message = document.getElementById("verifyMessage");
      const userDisplay = document.getElementById("userDisplay");

      fetch("/user")
        .then(res => res.json())
        .then(data => {
          if (!data.user) return;

          // Show username on page
          userDisplay.textContent = data.user;

          // Popup message
           message.innerHTML =
      "Your account has been verified successfully.<br>" +
      "<span style='font-size:13px;color:#666;'>" +
      "Signed in as: " + data.user +
      "</span>";

          // Show popup
          overlay.classList.remove("hidden");

          // Auto close after 2.5 seconds
          const autoClose = setTimeout(closePopup, 2500);

          // Close on click outside
          overlay.addEventListener("click", (e) => {
            if (e.target === overlay) {
              clearTimeout(autoClose);
              closePopup();
            }
          });
        });

      function closePopup() {
        overlay.classList.add("hidden");
      }
    });
  </script>

</body>
</html>
